

















#include <locale>
#include <locale.h>

































































inline std::size_t getNumGraphemes(const UnicodeString& ustr) {
  using namespace icu;

  UErrorCode err = U_ZERO_ERROR;
  char* locale = ::setlocale(LC_ALL, NULL);
  BreakIterator* iter =
      BreakIterator::createCharacterInstance(locale, err);

  assert(U_SUCCESS(err));
  iter->setText(ustr);

  std::size_t count = 0;
  while (iter->next() != BreakIterator::DONE) {
    ++count;
  }
  delete iter;
  return count;
}

inline std::size_t getNumGraphemes(std::string const& s) {
  return getNumGraphemes(toIcu(s));
}



































































































}











}
















































































































